<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Customizing Calva - Calva Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Customizing Calva";
    var mkdocs_page_input_path = "customizing.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Calva Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Getting Started</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../connect/">Connect Calva to Your Project</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../try-first/">Something to Try First (After Connecting)</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../finding-commands/">Finding Calva Commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../eval-tips/">Code Evaluation Tips</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Features</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../commands-top10/">The Top 10 Calva Commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../formatting/">Formatting</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../paredit/">Paredit – a Visual Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../debugger/">Debugger</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pprint/">Pretty Printing</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../linting/">Linting</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Customizing Calva</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Customizing Calva</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#clojure-defaults">Clojure Defaults</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#automatic-parmaeter-hints-poppup">Automatic Parmaeter Hints Poppup</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#code-formatting">Code Formatting</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#jack-in-and-connect-sequences">Jack-in and Connect Sequences</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-repl-window">The REPL Window</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#default-key-bindings">Default Key Bindings</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pretty-printing">Pretty Printing</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#calva-highlight">Calva Highlight</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#key-bindings">Key bindings</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#paredit">Paredit</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#wrap-using-like-cursive">Wrap using (, [, { (like Cursive)</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../connect-sequences/">REPL Jack-in and Connection Sequences</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../custom-commands/">Running Custom REPL Commands</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Using Calva with X</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../rebl/">How to Use Calva and REBL Together</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../vim/">Calva and the VIM Extension</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../wsl/">Calva ❤️ WSL</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../remote-development/">Using Calva with Remote Development</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../luminus/">How to Use Calva with Luminus</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Etcetera</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../workspace-layouts/">Workspace layouts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../quirks/">Quirks</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">In Depth</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../jack-in-guide/">Learn about Calva Jack-in</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Calva Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Customizing Calva &raquo;</li>
        
      
    
    <li>Customizing Calva</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="customizing-calva">Customizing Calva</h1>
<p>Don't like the defaults? On this page we can collect some of the customizations that people have done, and maybe write a thing or two about it some day.</p>
<p>Tip For VS Code newcomers: The search box in <strong>Settings</strong> is your friend. Also, some Calva settings are more complex than the Settings UI can handle. VS Code will then show you a link to <code>settings.json</code>. And VS Code's built-in <code>json</code> extension is awesome. To add settings for, say Calva's Pretty Printing, search for ”prettyprint” in VS Code Settings and follow the link to <code>settings.json</code>. Start typing ”calvapretty” until auto-complete suggests <code>calva.prettyPrintingOptions</code>. Press ENTER and VS Code will fill in these defaults:</p>
<pre><code class="json">    &quot;calva.prettyPrintingOptions&quot;: {
        &quot;enabled&quot;: true,
        &quot;printEngine&quot;: &quot;pprint&quot;,
        &quot;width&quot;: 40
    },
</code></pre>

<h2 id="clojure-defaults">Clojure Defaults</h2>
<p>Calva sets some VS Code settings for all Clojure files. Some of these are needed for Calva to function correctly, which should not be tampered with unless you really know what you are doing, and some of them are for convenience defaults. If you add a setting to your <code>settings.json</code> and accept the snippet help you get when you type <code>"[clojure]"</code>, you will get the Calva defaults pasted:</p>
<pre><code class="json">    &quot;[clojure]&quot;: {
        &quot;editor.wordSeparators&quot;: &quot;\t ()\&quot;':,;~@#$%^&amp;{}[]`&quot;,
        &quot;editor.autoClosingBrackets&quot;: &quot;always&quot;,
        &quot;editor.autoClosingQuotes&quot;: &quot;always&quot;,
        &quot;editor.formatOnType&quot;: true,
        &quot;editor.autoIndent&quot;: &quot;full&quot;,
        &quot;editor.formatOnPaste&quot;: true,
        &quot;files.trimTrailingWhitespace&quot;: false,
        &quot;editor.matchBrackets&quot;: &quot;never&quot;,
        &quot;editor.parameterHints.enabled&quot;: false
    }
</code></pre>

<h3 id="automatic-parmaeter-hints-poppup">Automatic Parmaeter Hints Poppup</h3>
<p>Calva has helpful parameter hints to aid when typing function calls. They look like so:</p>
<p><img width="353" alt="image" src="https://user-images.githubusercontent.com/30010/75957543-8cf4c180-5eba-11ea-8d77-1e543a73ef28.png"></p>
<p>To have the hints automatically pop up when you are typing, set <code>editor.parameterHints.enabled</code> to <code>true</code> in the above <code>[clojure]</code> scoped setting. (To call them up on demand the default VS Code keybindings are <code>cmd+shift+space</code> on Mac and <code>ctrl+shift+space</code> on Linux/Windows.)</p>
<h2 id="code-formatting">Code Formatting</h2>
<p>See [Formatting] for information on how to configure this.</p>
<h2 id="jack-in-and-connect-sequences">Jack-in and Connect Sequences</h2>
<p>Jack-in and Connect are very customizable through <a href="../connect-sequences/">Custom Connect Sequences</a>.</p>
<h2 id="the-repl-window">The REPL Window</h2>
<p>If you don't want the REPL window to open automatically on jack-in/connect, set <code>calva.openREPLWindowOnConnect</code> to <code>false</code>. Please note, that if the <a href="../connect-sequences/">Connect Sequence</a> you are using has <code>afterCLJReplJackInCode</code>, then the CLJ REPL window will open anyway in order to evaluate that code for you in a visible way.</p>
<h3 id="default-key-bindings">Default Key Bindings</h3>
<p>The REPL Window prompt is a multi line editor, and the keyboard shortcuts facilitate this by default. The shortcuts can be configured however you like, and there are two preconfigured maps for it as well. You set this via the <code>calva.REPLWindowPromptKeyMap</code> setting:</p>
<table>
<thead>
<tr>
<th>Prompt command</th>
<th>multi-line</th>
<th>single-line</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Submit</strong></td>
<td><kbd>alt+enter</kbd></td>
<td><kbd>enter</kbd></td>
</tr>
<tr>
<td><strong>New line</strong></td>
<td><kbd>enter</kbd></td>
<td><kbd>alt+enter</kbd></td>
</tr>
<tr>
<td><strong>Cursor Up</strong></td>
<td><kbd>up</kbd></td>
<td><kbd>alt+up</kbd></td>
</tr>
<tr>
<td><strong>Cursor Down</strong></td>
<td><kbd>down</kbd></td>
<td><kbd>alt+down</kbd></td>
</tr>
<tr>
<td><strong>History Up</strong></td>
<td><kbd>alt+up</kbd></td>
<td><kbd>up</kbd></td>
</tr>
<tr>
<td><strong>History Down</strong></td>
<td><kbd>alt+down</kbd></td>
<td><kbd>down</kbd></td>
</tr>
</tbody>
</table>
<p>As you might see, the simple pattern here is that in multi-line mode you move the cursor and enter new lines as in the regular editor, and use <code>alt</code> modifier to navigate the history and submit evaluations. In single-line mode it is the other way around.</p>
<h2 id="pretty-printing">Pretty Printing</h2>
<p>Calva's pretty printing mode can be configured a bit. See <a href="../pprint/">Pretty Printing</a>.</p>
<h2 id="calva-highlight">Calva Highlight</h2>
<p>Calva takes care of syntax highlighting, and also provides some features not available through VS Code's highlighting mechanism. These extras include rainbow parens, sane bracket matching, and comment form dimming/highlighting.</p>
<p>You are in charge of how brackets and comments are highlighted via the <code>calva.highlight.&lt;setting&gt;</code> settings:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enableBracketColors</code></td>
<td>Enable rainbow colors</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>bracketColors</code></td>
<td>Which colors to use</td>
<td><code>["#000", "#999"]</code></td>
</tr>
<tr>
<td><code>cycleBracketColors</code></td>
<td>Whether same colors should be reused for deeply nested brackets</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>misplacedBracketStyle</code></td>
<td>Style of misplaced bracket</td>
<td><code>{ "border": "2px solid #c33" }</code></td>
</tr>
<tr>
<td><code>matchedBracketStyle</code></td>
<td>Style of bracket pair highlight</td>
<td><code>{"backgroundColor": "#E0E0E0"}</code></td>
</tr>
<tr>
<td><code>ignoredFormStyle</code></td>
<td>Style of <code>#_...</code> form</td>
<td><code>{"textDecoration": "none; opacity: 0.5"}</code></td>
</tr>
<tr>
<td><code>commentFormStyle</code></td>
<td>Style of <code>(comment ...)</code> form</td>
<td><code>{"fontStyle": "italic"}</code></td>
</tr>
</tbody>
</table>
<p>The extras are built from <strong>Clojure Warrior</strong>, created by <a href="https://tonsky.me">Nikita Prokopov, a.k.a. @tonsky</a>'s. Please note that the default styling for <code>(comment ...)</code> forms now is to italicize them (instead of dimming). This is to promote using <code>comment</code> forms to work with the REPL.</p>
<h2 id="key-bindings">Key bindings</h2>
<ul>
<li>These key binds replace the default Calva ”prefix”, <code>ctrl+alt+c</code> to just <code>alt+v</code>: <a href="https://gist.github.com/conan/aa38688d7daa50804c8a433215dc6dc9">WebWItch's keybindings.json</a> (Please note, that <code>alt+v</code> does not work for some locales, but for when it works it is much less clunky than the default prefix).</li>
<li>Here the Calva key is switched for <code>ctrl+,</code>: <a href="https://gist.github.com/pikeview/317f639091f57c3055681b06f0dc791a">manas_marthi's keybindings</a></li>
<li><a href="../emacs-keybindings/">Keybindings for Emacs users</a></li>
</ul>
<p>Are you a vim extension user? See: <a href="../vim/">Using with VIM extension</a>.</p>
<h3 id="paredit">Paredit</h3>
<p>Please be aware that the REPL window does not handle chorded shortcuts. Something to keep in mind when customizing <a href="../paredit/">Paredit</a> shortcuts, because those are dispatched onto the REPL window. So, best to avoid chorded shortcuts for Paredit.</p>
<h2 id="wrap-using-like-cursive">Wrap using <code>(</code>, <code>[</code>, <code>{</code> (like Cursive)</h2>
<p>Something I use in IntelliJ/Cursive is the ability to select an expression and hit one of <code>(</code>, <code>[</code>, <code>{</code> to wrap it. And after wrapping the expression I don't want the selection anymore, so if I were wrapping <code>(foo)</code> then I would want to get <code>( | (foo))</code> where <code>|</code> would be my cursor.</p>
<p>Here's how you can make this work with Calva Paredit: Update all of the <code>Paredit: Wrap Around ...</code> commands so that their respective shortcuts are the wrappers themselves and update the <code>when</code> clause to include <code>editorHasSelection</code> (otherwise when you open a paren and the next expression would get slurped in).</p>
<p>The change would look like this in your <code>keybindings.json</code>:</p>
<pre><code class="json">    {
        &quot;key&quot;: &quot;shift+9&quot;,
        &quot;command&quot;: &quot;paredit.wrapAroundParens&quot;,
        &quot;when&quot;: &quot;editorTextFocus &amp;&amp; editorHasSelection &amp;&amp; !editorReadOnly &amp;&amp; editorLangId =~ /clojure|scheme|lisp/ &amp;&amp; paredit:keyMap =~ /original|strict/&quot;
    },
    {
        &quot;key&quot;: &quot;[&quot;,
        &quot;command&quot;: &quot;paredit.wrapAroundSquare&quot;,
        &quot;when&quot;: &quot;editorHasSelection &amp;&amp; editorTextFocus &amp;&amp; !editorReadOnly &amp;&amp; editorLangId =~ /clojure|scheme|lisp/ &amp;&amp; paredit:keyMap =~ /original|strict/&quot;
    },
    {
        &quot;key&quot;: &quot;shift+[&quot;,
        &quot;command&quot;: &quot;paredit.wrapAroundCurly&quot;,
        &quot;when&quot;: &quot;editorHasSelection &amp;&amp; editorTextFocus &amp;&amp; !editorReadOnly &amp;&amp; editorLangId =~ /clojure|scheme|lisp/ &amp;&amp; paredit:keyMap =~ /original|strict/&quot;
    }
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../connect-sequences/" class="btn btn-neutral float-right" title="REPL Jack-in and Connection Sequences">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../linting/" class="btn btn-neutral" title="Linting"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../linting/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../connect-sequences/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
